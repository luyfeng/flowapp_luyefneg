<!DOCTYPE html>
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Controller-app</title>

    <!-- Bootstrap Core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" media="screen" href="/static/css/ui.jqgrid-bootstrap.css" />


    <!-- MetisMenu CSS -->
    <link href="/static/css/metisMenu.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link href="/static/css/dataTables.bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/static/css/font-awesome.min.css" rel="stylesheet"
          type="text/css">
    <link href="/static/css/boot-crm.css" rel="stylesheet"
          type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div id="wrapper">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-static-top" role="navigation"
         style="margin-bottom: 0">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span> <span
                    class="icon-bar"></span> <span class="icon-bar"></span> <span
                    class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="flowui.html">ODLWEBAPP v1.0</a>
        </div>
        <!-- /.navbar-header -->

        <ul class="nav navbar-top-links navbar-right">
            <li class="dropdown"><a class="dropdown-toggle"
                                    data-toggle="dropdown" href="#"> <i class="fa fa-envelope fa-fw"></i>
                <i class="fa fa-caret-down"></i>
            </a>
                <ul class="dropdown-menu dropdown-messages">
                    <li><a href="#">
                        <div>
                            <strong>令狐冲</strong> <span class="pull-right text-muted">
									<em>昨天</em>
								</span>
                        </div>
                        <div>今天晚上向大哥找我吃饭，讨论一下去梅庄的事...</div>
                    </a></li>
                    <li class="divider"></li>
                    <li><a class="text-center" href="#"> <strong>查看全部消息</strong>
                        <i class="fa fa-angle-right"></i>
                    </a></li>
                </ul> <!-- /.dropdown-messages --></li>
            <!-- /.dropdown -->
            <li class="dropdown"><a class="dropdown-toggle"
                                    data-toggle="dropdown" href="#"> <i class="fa fa-tasks fa-fw"></i>
                <i class="fa fa-caret-down"></i>
            </a>
                <ul class="dropdown-menu dropdown-tasks">
                    <li><a href="#">
                        <div>
                            <p>
                                <strong>任务 1</strong> <span class="pull-right text-muted">完成40%</span>
                            </p>
                            <div class="progress progress-striped active">
                                <div class="progress-bar progress-bar-success"
                                     role="progressbar" aria-valuenow="40" aria-valuemin="0"
                                     aria-valuemax="100" style="width: 40%">
                                    <span class="sr-only">完成40%</span>
                                </div>
                            </div>
                        </div>
                    </a></li>
                    <li class="divider"></li>
                    <li><a href="#">
                        <div>
                            <p>
                                <strong>任务 2</strong> <span class="pull-right text-muted">完成20%</span>
                            </p>
                            <div class="progress progress-striped active">
                                <div class="progress-bar progress-bar-info" role="progressbar"
                                     aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"
                                     style="width: 20%">
                                    <span class="sr-only">完成20%</span>
                                </div>
                            </div>
                        </div>
                    </a></li>
                    <li class="divider"></li>
                    <li><a class="text-center" href="#"> <strong>查看所有任务</strong>
                        <i class="fa fa-angle-right"></i>
                    </a></li>
                </ul> <!-- /.dropdown-tasks --></li>
            <!-- /.dropdown -->
            <li class="dropdown"><a class="dropdown-toggle"
                                    data-toggle="dropdown" href="#"> <i class="fa fa-bell fa-fw"></i>
                <i class="fa fa-caret-down"></i>
            </a>
                <ul class="dropdown-menu dropdown-alerts">
                    <li><a href="#">
                        <div>
                            <i class="fa fa-comment fa-fw"></i> 新回复 <span
                                class="pull-right text-muted small">4分钟之前</span>
                        </div>
                    </a></li>
                    <li class="divider"></li>
                    <li><a href="#">
                        <div>
                            <i class="fa fa-envelope fa-fw"></i> 新消息 <span
                                class="pull-right text-muted small">4分钟之前</span>
                        </div>
                    </a></li>
                    <li class="divider"></li>
                    <li><a href="#">
                        <div>
                            <i class="fa fa-tasks fa-fw"></i> 新任务 <span
                                class="pull-right text-muted small">4分钟之前</span>
                        </div>
                    </a></li>
                    <li class="divider"></li>
                    <li><a href="#">
                        <div>
                            <i class="fa fa-upload fa-fw"></i> 服务器重启 <span
                                class="pull-right text-muted small">4分钟之前</span>
                        </div>
                    </a></li>
                    <li class="divider"></li>
                    <li><a class="text-center" href="#"> <strong>查看所有提醒</strong>
                        <i class="fa fa-angle-right"></i>
                    </a></li>
                </ul> <!-- /.dropdown-alerts --></li>
            <!-- /.dropdown -->
            <li class="dropdown"><a class="dropdown-toggle"
                                    data-toggle="dropdown" href="#"> <i class="fa fa-user fa-fw"></i>
                <i class="fa fa-caret-down"></i>
            </a>
                <ul class="dropdown-menu dropdown-user">
                    <li><a href="#"><i class="fa fa-user fa-fw"></i> 用户设置</a></li>
                    <li><a href="#"><i class="fa fa-gear fa-fw"></i> 系统设置</a></li>
                    <li class="divider"></li>
                    <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i>
                        退出登录</a></li>
                </ul> <!-- /.dropdown-user --></li>
            <!-- /.dropdown -->
        </ul>
        <!-- /.navbar-top-links -->

        <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav navbar-collapse">
                <ul class="nav" id="side-menu">
                    <li class="sidebar-search">
                        <div class="input-group custom-search-form">
                            <input type="text" class="form-control" placeholder="查询内容...">
                            <span class="input-group-btn">
								<button class="btn btn-default" type="button">
									<i class="fa fa-search" style="padding: 3px 0 3px 0;"></i>
								</button>
							</span>
                        </div> <!-- /input-group -->
                    </li>
                    <li>
                        <a href="/th/flowui" class="active">
                            <i class="fa fa-edit fa-fw"></i>流表操作
                        </a>
                    </li>
                    <li><a href="/th/echartdemo_topo">
                        <i class="fa fa-dashboard fa-fw"></i>网络拓扑
                    </a>
                    </li>
                    <li>
                        <a href="/th/echartdemo">
                            <i class="fa fa-line-chart fa-fw" ></i>实时流量
                        </a>
                    </li>
                    <li>
                        <a href="/th/node_connector">
                            <i class="fa fa-android fa-fw" ></i>设备信息
                        </a>
                    </li>
                    <li>
                        <a href="/th/demo_nodes">
                            <i class="fa fa-desktop fa-fw" ></i>实时设备
                        </a>
                    </li>
                    <!--<li>-->
                        <!--<a href="">-->
                            <!--<i class="fa fa-line-chart fa-fw" ></i>导航6-->
                        <!--</a>-->
                    <!--</li>-->
                </ul>
            </div>
            <!-- /.sidebar-collapse -->
        </div>
        <!-- /.navbar-static-side -->
    </nav>

    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">TOPO</h1>
            </div>
            <!-- /.col-lg-12 -->
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div id="main" style="height: 400px;"></div>
                <!-- /.panel -->
            </div>
            <!-- /.col-lg-12 -->
            <div class="col-lg-6">
                <div style="height: 400px;">
                    <div class="panel panel-default table-responsive table-hover">

                        <div class="panel-heading"><h4>控制器信息</h4></div>

                        <table class="table table-bordered table-striped">
                            <thead>
                            <tr>
                                <th>交换机连接的控制器IP</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr class="text-center">
                                <td>10.211.55.10</td>
                            </tr>
                            </tbody>
                        </table>



                    </div>
                </div>
            </div>

            <div class="col-lg-12">
                <div>

                    <table id="jqGrid"></table>
                    <div id="jqGridPager" style="height: 36px">

                    </div>

                    <!--<div class="panel panel-default table-responsive table-hover">-->

                    <!--<div class="panel-body"><d>交换机</d></div>-->
                    <!--&lt;!&ndash; /.panel-heading &ndash;&gt;-->
                    <!--<table class="table table-bordered table-striped">-->
                        <!--<thead>-->
                        <!--<tr>-->
                            <!--<th>交换机名称</th>-->
                            <!--<th>交换机IP</th>-->
                            <!--<th>交换机MAC</th>-->
                            <!--<th>连接PC数</th连接PC数>-->
                            <!--&lt;!&ndash;<th>operate</th>&ndash;&gt;-->
                        <!--</tr>-->
                        <!--</thead>-->
                        <!--<tbody>-->
                        <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                        <!--<tr >-->
                            <!--<td >openflow:1</td>-->
                            <!--<td >&#45;&#45;&#45;&#45;&#45;&#45;</td>-->
                            <!--<td >&#45;&#45;&#45;&#45;&#45;&#45;</td>-->
                            <!--<td >2</td>-->
                        <!--</tr>-->
                        <!--</tbody>-->
                    <!--</table>-->
                <!--</div>-->

                    <!--<div class="panel panel-default table-responsive table-hover">-->

                        <!--<div class="panel-heading">个人主机</div>-->
                        <!--&lt;!&ndash; /.panel-heading &ndash;&gt;-->
                        <!--<table class="table table-bordered table-striped">-->
                            <!--<thead>-->
                            <!--<tr>-->
                                <!--<th>PC设备</th>-->
                                <!--<th>PC的IP</th>-->
                                <!--<th>PC的MAC地址</th>-->
                                <!--<th>连接的交换机</th>-->

                            <!--</tr>-->
                            <!--</thead>-->
                            <!--<tbody>-->
                            <!--&lt;!&ndash;<tr>&ndash;&gt;-->
                            <!--<tr >-->
                                <!--<td >host:c2:d1:24:4b:aa:c0</td>-->
                                <!--<td >10.0.0.1</td>-->
                                <!--<td >c2:d1:24:4b:aa:c0</td>-->
                                <!--<td >openflow:1</td>-->
                            <!--</tr>-->
                            <!--<tr >-->
                                <!--<td >host:ce:61:4c:34:15:77</td>-->
                                <!--<td >10.0.0.2</td>-->
                                <!--<td >ce:61:4c:34:15:77</td>-->
                                <!--<td >openflow:1</td>-->
                            <!--</tr>-->
                            <!--</tbody>-->
                        <!--</table>-->
                    <!--</div>-->

                </div>
            </div>

            <!--<div class="row">-->
                <!--<div class="col-lg-12" style="background-color: #2e6da4;width: 1600px;height: 400px;">-->

                <!--</div>-->
            <!--</div>-->
        </div>
    </div>

    <!-- /#page-wrapper -->

</div>

<!-- jQuery -->
<script src="/static/js/jquery.min.js"></script>

<script type="text/ecmascript" src="/static/js/grid.locale-en.js"></script>
<script type="text/ecmascript" src="/static/js/jquery.jqGrid.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/static/js/bootstrap.min.js"></script>

<!-- Metis Menu Plugin JavaScript -->
<script src="/static/js/metisMenu.min.js"></script>

<!-- DataTables JavaScript -->
<script src="/static/js/jquery.dataTables.min.js"></script>
<script src="/static/js/dataTables.bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/static/js/sb-admin-2.js"></script>

<script src="/static/js/echarts.min.js"></script>

<script>
    // $.jgrid.defaults.width = 780;
    $.jgrid.defaults.responsive = true;
    $.jgrid.defaults.styleUI = 'Bootstrap';
</script>

<script>
    $(document).ready(function () {
        // debugger;
        $("#jqGrid").jqGrid({
            // debugger,
            url: '/topo/getAllTpLinkapi',
            // debugger,
            mtype: "GET",
            styleUI : 'Bootstrap',
            datatype: "json",
            colModel: [
                { label: '连接ID', name: 'linkId', key: true },
                { label: '目的节点', name: 'destNode' },
                { label: '源节点', name: 'sourceNode' },
                { label: '连接目的', name: 'destTp' },
                { label: '连接源地', name: 'sourceTp' }
            ],
            viewrecords: true,
            // height: 300,
            width:1000,
            rowNum: 20,
            pager: "#jqGridPager"
        });
    });
</script>

<script type="text/javascript">
    //基于准备好的dom,初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));


    var node = [];
    $.ajax({
        type : "get",
        async : false,
        url : "/topo/getv2NodeListapi",
        data : {},
        success : function(result) {
            var i = 0;
            console.log("result=="+JSON.stringify(result));

            $.each(result.data, function (key, value) {
                node[i] = value;
                i++;
            });
            // console.log(node);

        }

    });
    console.log("node=="+JSON.stringify(node));

    var link = [];
    $.ajax({
        type : "get",
        async : false,
        url : "/topo/getv2LinkListapi",
        data : {},
        success : function (result2) {
            var j = 0;

            console.log("resultv2=="+JSON.stringify(result2));

            $.each(result2.data, function (key, value) {
                link[j] = value;
                j++;

            })

        }
    });
    console.log("link=="+link);





    //指定图表的配置项和数据
    var option = {

        // backgroundColor: '#2c343c', //画布颜色
        backgroundColor: 'gray',

        title: {
            text: '简单网络拓扑'
        },
        // tooltip: {},

        tooltip:{
            position:'bottom',//悬浮时显示的位置
            backgroundColor:'#0050FF',
            textStyle:{fontSize:18,},

            formatter:function(params){//悬浮提示框显示的内容
                if(params.data.name){return "x:"+params.data.x+"   name: "+params.data.name}
            }
        },

        animationDurationUpdate: 1500,
        animationEasingUpdate: 'quinticInOut',
        series: [{
            type: 'graph',
            layout: 'none',
            symbolSize: 50,   //图形的大小 圆的大小
            roam: true,//鼠标缩放及平移
            focusNodeAdjacency:true,//是否在鼠标移到节点上的时候突出显示节点、节点的边和邻接节点
            label: {
                normal: {
                    show: true   //控制非高亮时节点名称是否显示
                    // position:'top',
                    // fontSize:18,
                    // color:'blue'
                }
            },
            edgeSymbol: ['circle', 'arrow'],
            edgeSymbolSize: [4, 10],
            edgeLabel: {
                normal: {
                    textStyle: {
                        fontSize: 20
                    }
                }
            },
            // data: [{
            //     name: '主机1',
            //     x: 100,
            //     y: 100
            // }, {
            //     name: '主机2',
            //     x: 220,
            //     y: 310
            // }, {
            //     name: '交换机s1',
            //     x: 100,
            //     y: 200
            // }, {
            //     name: '主机4',
            //     x: 10,
            //     y: 300
            // }],
            // // links: [],
            // links: [{
            //     source: '交换机s1',
            //     target: '主机1'
            // }, {
            //     source: '交换机s1',
            //     target: '主机2'
            // }, {
            //     source: '交换机s1',
            //     target: '主机4'
            // }],

            data:[],
            links:[],

            lineStyle: {
                normal: {
                    opacity: 0.9,
                    width: 2,
                    curveness: 0
                }
            }
        }]
    };

    //--- 传值 ---
    option.series[0].data = node;
    option.series[0].links = link;

    console.log(option.series[0].data);

    //使用刚指定的配置项和数据显示图表.
    myChart.setOption(option);
</script>

</body>
</html>

